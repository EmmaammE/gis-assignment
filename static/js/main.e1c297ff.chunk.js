(this["webpackJsonpgis-assignment"]=this["webpackJsonpgis-assignment"]||[]).push([[0],[,,,function(t,e){t.exports="data:image/png;base64,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"},,function(t,e,n){},,,,function(t,e){t.exports="data:image/png;base64,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"},function(t,e,n){t.exports=n(20)},,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(8),r=n.n(i),c=(n(15),n(2)),s=(n(16),"https://api.mapbox.com/styles/v1/".concat("zrcccrz/ckd1yhxh22g561ioaerfchy99","/tiles/{z}/{x}/{y}?access_token=").concat("pk.eyJ1IjoienJjY2NyeiIsImEiOiJjank2bjgzMzcwZmJqM2RsYjBtbjh2Z3F6In0.Bi-7OaOTBaJ43pJM-hAT-g"));n(5);var u=n(3),l=n.n(u),A=n(9),f=n.n(A),p=.006693421622965943;function h(t){return t.lat>=.8293&&t.lat<=55.8271&&t.lon>=72.004&&t.lon<=137.8347}var m=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&!h(t))return console.warn("Non-Chinese coords found, returning as-is: "+"(".concat(t.lat,", ").concat(t.lon,")")),t;var n=t.lon-105,a=t.lat-35,o=2*n-100+3*a+.2*a*a+.1*n*a+.2*Math.sqrt(Math.abs(n))+20*(2*Math.sin(6*n*Math.PI)+2*Math.sin(2*n*Math.PI)+2*Math.sin(a*Math.PI)+4*Math.sin(a/3*Math.PI)+16*Math.sin(a/12*Math.PI)+32*Math.sin(a/30*Math.PI))/3,i=300+n+2*a+.1*n*n+.1*n*a+.1*Math.sqrt(Math.abs(n))+20*(2*Math.sin(6*n*Math.PI)+2*Math.sin(2*n*Math.PI)+2*Math.sin(n*Math.PI)+4*Math.sin(n/3*Math.PI)+15*Math.sin(n/12*Math.PI)+30*Math.sin(n/30*Math.PI))/3,r=t.lat/180*Math.PI,c=1-p*Math.pow(Math.sin(r),2),s=Math.PI/180*(6378245*(1-p))/Math.pow(c,1.5),u=Math.PI/180*(6378245*Math.cos(r)/Math.sqrt(c));return{lat:t.lat+o/s,lon:t.lon+i/u}};var w=function(t){var e=t.center,i=t.zoom,r=t.markersData,s=Object(a.useState)(null),u=Object(c.a)(s,2),A=u[0],p=u[1];Object(a.useEffect)((function(){new Promise((function(t,e){if(window.AMap)return t(window.AMap);window.init=function(){t(window.AMap)};var n=document.createElement("script");n.type="text/javascript",n.src="//webapi.amap.com/maps?v=1.4.15&key=63cbf408d546f937970be999e38d6956&callback=init",n.onerror=e,n.id="amap",document.head.appendChild(n)})).then((function(t){var n=new t.Map("container",{zoom:i,center:e.reverse()});p(n)})).catch((function(t){console.log(t)}))}),[r]),Object(a.useEffect)((function(){if(window.AMap&&null!==A){var t=null===r||void 0===r?void 0:r.map((function(t){return new window.AMap.Marker({position:new window.AMap.LngLat(t.lng,t.lat),title:t.title||"",icon:n(6)})}));r&&r.forEach((function(e){var n=m({lat:e.lat,lon:e.lng});t&&t.push(h(new window.AMap.Marker({position:new window.AMap.LngLat(n.lon,n.lat),title:"wgs_gcj",icon:f.a}),"gcj"))})),r&&Promise.all(r.map((function(t){return new Promise((function(t,e){window.AMap.convertFrom([116.3,39.9],"gps",(function(n,a){if("ok"===a.info){var o=String(a.locations).split(",");console.log(o),t(o)}else e(a.info)}))}))}))).then((function(e){e.forEach((function(e){t&&t.push(h(new window.AMap.Marker({position:e.locations,title:"\u8f6c\u6362\u540e",icon:l.a}),"\u9ad8\u5fb7\u5730\u56fe\u8f6c\u6362"))})),A.add(t)}))}}),[r,A]);var h=function(t,e){return t.setLabel({content:"<div class='info'>"+e+"</div",direction:"bottom"}),t};return o.a.createElement("div",{id:"container"})},M=n(1),d=n.n(M);delete d.a.Icon.Default.prototype._getIconUrl,d.a.Icon.Default.mergeOptions({iconRetinaUrl:n(17),iconUrl:n(6),shadowUrl:n(7)});new d.a.Icon({iconUrl:l.a,shadowUrl:n(7),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});var v=Object(a.forwardRef)((function(t,e){var n=t.center,i=t.zoom,r=t.url,c=t.attribution,s=t.markersData;Object(a.useImperativeHandle)(e,(function(){return{fitBounds:A}}));var u=Object(a.useRef)(null);Object(a.useEffect)((function(){var t=d.a.map("map",{center:d.a.latLng(n[0],n[1]),zoom:i,layers:[d.a.tileLayer(r,{attribution:c})]});u.current=t}),[n,i,r,c]);var l=o.a.useRef(null);Object(a.useEffect)((function(){l.current=d.a.featureGroup().addTo(u.current)}),[]),Object(a.useEffect)((function(){if(null!==s){var t=[];s.forEach((function(e){t.push(d.a.marker(d.a.latLng(e.lat,e.lng),{title:e.title||""}))})),l.current=d.a.featureGroup(t).addTo(u.current),A()}}),[s]);var A=function(){var t=l.current.getBounds();Object.keys(t).length>0&&u.current.fitBounds(t,{maxZoom:16})};return o.a.createElement("div",{id:"map",ref:u})}));var b=function(t){var e=t.fit,n=t.setFit,i=t.status,r=Object(a.useState)([29.896136,121.644553]),u=Object(c.a)(r,2),l=u[0],A=(u[1],Object(a.useState)(15)),f=Object(c.a)(A,2),p=f[0],h=(f[1],Object(a.useState)(null)),m=Object(c.a)(h,2),M=m[0],d=m[1],b=Object(a.useRef)(null);Object(a.useEffect)((function(){if("geolocation"in navigator){var t=setTimeout((function(){navigator.geolocation.getCurrentPosition((function(t){g(t)}))}),2e3);return function(){clearTimeout(t)}}console.log("\u5730\u56fe\u670d\u52a1\u4e0d\u53ef\u7528")}),[]);var g=function(t){var e=t.coords,n=e.latitude,a=e.longitude;console.log("\u83b7\u5f97\u4e86\u5730\u7406\u4f4d\u7f6e",n,a);var o=[];o.push({lat:n,lng:a}),d(o)};return Object(a.useEffect)((function(){e&&(b.current.fitBounds(),n(!1))}),[e]),i?o.a.createElement(w,{center:l,zoom:p,markersData:M}):o.a.createElement(v,{ref:b,center:l,zoom:p,url:s,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',markersData:M})};n(18);var g=function(t){var e=t.title,n=t.onClick,a=t.status,i=void 0!==a&&a;return o.a.createElement("div",{className:["button",i?"clicked":""].join(" "),onClick:n},e)};n(19);var E=function(t){var e=t.setFit,n=t.status,a=t.setStatus,i=function(){a(!n)};return o.a.createElement("div",{className:"menu-wrapper"},o.a.createElement("div",{className:"pos-btn",onClick:function(){e(!0)}}),o.a.createElement("div",{className:"btn-container"},o.a.createElement(g,{title:"\u9ad8\u5fb7\u5730\u56fe",status:n,onClick:i}),o.a.createElement(g,{title:"Mapbox",status:!n,onClick:i})))};var O=function(){var t=Object(a.useState)(!1),e=Object(c.a)(t,2),n=e[0],i=e[1],r=Object(a.useState)(!1),s=Object(c.a)(r,2),u=s[0],l=s[1];return o.a.createElement("div",{className:"app mobile-wrapper"},o.a.createElement(b,{fit:n,setFit:i,status:u}),o.a.createElement(E,{setFit:i,status:u,setStatus:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.e1c297ff.chunk.js.map