(this["webpackJsonpgis-assignment"]=this["webpackJsonpgis-assignment"]||[]).push([[0],[,,,function(t,e){t.exports="data:image/png;base64,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"},,function(t,e,a){},,,,function(t,e,a){t.exports=a(19)},,,,,function(t,e,a){},function(t,e,a){},,function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(8),c=a.n(r),i=(a(14),a(2)),s=(a(15),"https://api.mapbox.com/styles/v1/".concat("zrcccrz/ckd1yhxh22g561ioaerfchy99","/tiles/{z}/{x}/{y}?access_token=").concat("pk.eyJ1IjoienJjY2NyeiIsImEiOiJjank2bjgzMzcwZmJqM2RsYjBtbjh2Z3F6In0.Bi-7OaOTBaJ43pJM-hAT-g"));a(5);var l=a(3),u=a.n(l);var f=function(t){var e=t.center,r=t.zoom,c=t.markersData,s=Object(n.useState)(null),l=Object(i.a)(s,2),f=l[0],h=l[1];return Object(n.useEffect)((function(){new Promise((function(t,e){if(window.AMap)return t(window.AMap);window.init=function(){t(window.AMap)};var a=document.createElement("script");a.type="text/javascript",a.src="//webapi.amap.com/maps?v=1.4.15&key=63cbf408d546f937970be999e38d6956&callback=init",a.onerror=e,a.id="amap",document.head.appendChild(a)})).then((function(t){var a=new t.Map("container",{zoom:r,center:e.reverse()});h(a)})).catch((function(t){console.log(t)}))}),[c]),Object(n.useEffect)((function(){if(window.AMap&&null!==f){var t=null===c||void 0===c?void 0:c.map((function(t){return new window.AMap.Marker({position:new window.AMap.LngLat(t.lng,t.lat),title:t.title||"",icon:a(6)})}));c&&Promise.all(c.map((function(t){return new Promise((function(t,e){window.AMap.convertFrom([116.3,39.9],"gps",(function(a,n){if("ok"===n.info){var o=String(n.locations).split(",");console.log(o),t(o)}else e(n.info)}))}))}))).then((function(e){e.forEach((function(e){t&&t.push(new window.AMap.Marker({position:e.locations,title:"\u8f6c\u6362\u540e",icon:u.a}))})),f.add(t)}))}}),[c,f]),o.a.createElement("div",{id:"container"})},h=a(1),p=a.n(h),d=.006693421622965943;function m(t){return t.lat>=.8293&&t.lat<=55.8271&&t.lon>=72.004&&t.lon<=137.8347}var v=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&!m(t))return console.warn("Non-Chinese coords found, returning as-is: "+"(".concat(t.lat,", ").concat(t.lon,")")),t;var a=t.lon-105,n=t.lat-35,o=2*a-100+3*n+.2*n*n+.1*a*n+.2*Math.sqrt(Math.abs(a))+20*(2*Math.sin(6*a*Math.PI)+2*Math.sin(2*a*Math.PI)+2*Math.sin(n*Math.PI)+4*Math.sin(n/3*Math.PI)+16*Math.sin(n/12*Math.PI)+32*Math.sin(n/30*Math.PI))/3,r=300+a+2*n+.1*a*a+.1*a*n+.1*Math.sqrt(Math.abs(a))+20*(2*Math.sin(6*a*Math.PI)+2*Math.sin(2*a*Math.PI)+2*Math.sin(a*Math.PI)+4*Math.sin(a/3*Math.PI)+15*Math.sin(a/12*Math.PI)+30*Math.sin(a/30*Math.PI))/3,c=t.lat/180*Math.PI,i=1-d*Math.pow(Math.sin(c),2),s=Math.PI/180*(6378245*(1-d))/Math.pow(i,1.5),l=Math.PI/180*(6378245*Math.cos(c)/Math.sqrt(i));return{lat:t.lat+o/s,lon:t.lon+r/l}};delete p.a.Icon.Default.prototype._getIconUrl,p.a.Icon.Default.mergeOptions({iconRetinaUrl:a(16),iconUrl:a(6),shadowUrl:a(7)});var M=new p.a.Icon({iconUrl:u.a,shadowUrl:a(7),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),b=Object(n.forwardRef)((function(t,e){var a=t.center,r=t.zoom,c=t.url,i=t.attribution,s=t.markersData;Object(n.useImperativeHandle)(e,(function(){return{fitBounds:f}}));var l=Object(n.useRef)(null);Object(n.useEffect)((function(){var t=p.a.map("map",{center:p.a.latLng(a[0],a[1]),zoom:r,layers:[p.a.tileLayer(c,{attribution:i})]});l.current=t}),[a,r,c,i]);var u=o.a.useRef(null);Object(n.useEffect)((function(){u.current=p.a.featureGroup().addTo(l.current)}),[]),Object(n.useEffect)((function(){if(null!==s){var t=[];s.forEach((function(e){var a=v({lat:e.lat,lon:e.lng});t.push(p.a.marker(p.a.latLng(a.lat,a.lon),{title:"\u8f6c\u6362\u540e",icon:M})),t.push(p.a.marker(p.a.latLng(e.lat,e.lng),{title:e.title||""}))})),u.current=p.a.featureGroup(t).addTo(l.current),f()}}),[s]);var f=function(){var t=u.current.getBounds();Object.keys(t).length>0&&l.current.fitBounds(t,{maxZoom:16})};return o.a.createElement("div",{id:"map",ref:l})}));var w=function(t){var e=t.fit,a=t.setFit,r=t.status,c=Object(n.useState)([29.896136,121.644553]),l=Object(i.a)(c,2),u=l[0],h=(l[1],Object(n.useState)(15)),p=Object(i.a)(h,2),d=p[0],m=(p[1],Object(n.useState)(null)),v=Object(i.a)(m,2),M=v[0],w=v[1],A=Object(n.useRef)(null);Object(n.useEffect)((function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){g(t)})):console.log("\u5730\u56fe\u670d\u52a1\u4e0d\u53ef\u7528")}),[]);var g=function(t){var e=t.coords,a=e.latitude,n=e.longitude;console.log(a,n);var o=[];o.push({lat:a,lng:n}),w(o)};return Object(n.useEffect)((function(){e&&(A.current.fitBounds(),a(!1))}),[e]),r?o.a.createElement(f,{center:u,zoom:d,markersData:M}):o.a.createElement(b,{ref:A,center:u,zoom:d,url:s,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',markersData:M})};a(17);var A=function(t){var e=t.title,a=t.onClick,n=t.status,r=void 0!==n&&n;return o.a.createElement("div",{className:["button",r?"clicked":""].join(" "),onClick:a},e)};a(18);var g=function(t){var e=t.setFit,a=t.status,n=t.setStatus,r=function(){n(!a)};return o.a.createElement("div",{className:"menu-wrapper"},o.a.createElement("div",{className:"pos-btn",onClick:function(){e(!0)}}),o.a.createElement("div",{className:"btn-container"},o.a.createElement(A,{title:"\u9ad8\u5fb7\u5730\u56fe",status:a,onClick:r}),o.a.createElement(A,{title:"Mapbox",status:!a,onClick:r})))};var O=function(){var t=Object(n.useState)(!1),e=Object(i.a)(t,2),a=e[0],r=e[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1];return o.a.createElement("div",{className:"app mobile-wrapper"},o.a.createElement(w,{fit:a,setFit:r,status:l}),o.a.createElement(g,{setFit:r,status:l,setStatus:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.c5b9afbd.chunk.js.map